@using Hinet.Model.Entities;

@model QLTinBai

    <script src="~/assets/font-awesome/5.9.0/js/all.min.js"></script>
<link href="~/Content/CropImage/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/CropImage/css/cropper.css" rel="stylesheet" />
<link href="~/Content/CropImage/css/main.css" rel="stylesheet" />
<div class="container">
    <div class="row">
        <div class="col-md-9">
            <!-- <h3>Demo:</h3> -->
            <div class="img-container">
                <img src="/@Model.AnhDaiDien" />
            </div>
        </div>
        <div class="col-md-3">
            <!-- <h3>Preview:</h3> -->
            <div class="docs-preview clearfix">
                <div class="img-preview preview-lg"></div>
            </div>

            <!-- <h3>Data:</h3> -->
            <div class="docs-data">
                <div class="input-group input-group-sm">
                    <span class="input-group-prepend">
                        <label class="input-group-text" for="dataX">X</label>
                    </span>
                    <input type="text" class="form-control" id="dataX" placeholder="x">
                    <span class="input-group-append">
                        <span class="input-group-text">px</span>
                    </span>
                </div>
                <div class="input-group input-group-sm">
                    <span class="input-group-prepend">
                        <label class="input-group-text" for="dataY">Y</label>
                    </span>
                    <input type="text" class="form-control" id="dataY" placeholder="y">
                    <span class="input-group-append">
                        <span class="input-group-text">px</span>
                    </span>
                </div>
                <div class="input-group input-group-sm">
                    <span class="input-group-prepend">
                        <label class="input-group-text" for="dataWidth">Width</label>
                    </span>
                    <input type="text" class="form-control" id="dataWidth" placeholder="width">
                    <span class="input-group-append">
                        <span class="input-group-text">px</span>
                    </span>
                </div>
                <div class="input-group input-group-sm">
                    <span class="input-group-prepend">
                        <label class="input-group-text" for="dataHeight">Height</label>
                    </span>
                    <input type="text" class="form-control" id="dataHeight" placeholder="height">
                    <span class="input-group-append">
                        <span class="input-group-text">px</span>
                    </span>
                </div>
                <div class="input-group input-group-sm" style="display:none">
                    <span class="input-group-prepend">
                        <label class="input-group-text" for="dataRotate">Rotate</label>
                    </span>
                    <input type="text" class="form-control" id="dataRotate" placeholder="rotate">
                    <span class="input-group-append">
                        <span class="input-group-text">deg</span>
                    </span>
                </div>
                <div class="input-group input-group-sm" style="display:none">
                    <span class="input-group-prepend">
                        <label class="input-group-text" for="dataScaleX">ScaleX</label>
                    </span>
                    <input type="text" class="form-control" id="dataScaleX" placeholder="scaleX">
                </div>
                <div class="input-group input-group-sm" style="display:none">
                    <span class="input-group-prepend">
                        <label class="input-group-text" for="dataScaleY">ScaleY</label>
                    </span>
                    <input type="text" class="form-control" id="dataScaleY" placeholder="scaleY">
                </div>
                <div class="btn-group d-flex flex-nowrap" data-toggle="buttons">
                    <label class="btn btn-primary active">
                        <input type="radio" class="sr-only" id="aspectRatio1" name="aspectRatio" value="1.7777777777777777">
                        <span class="docs-tooltip" data-toggle="tooltip" title="aspectRatio: 16 / 9">
                            16:9
                        </span>
                    </label>

                </div>
                <div style="margin-top:12px;text-align:center" class="clearfix">
                    <a class="btn btn-primary" href="javascript:void(0);" onclick="HoanThanh('@Model.Id')">Hoàn thành</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="actions">
        <div class="col-md-9 docs-buttons">
            <!-- <h3>Toolbar:</h3> -->

            <div style="text-align:center">
                <div class="btn-group">
                    <button type="button" class="btn btn-primary" data-method="zoom" data-option="0.1" title="Zoom In">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.zoom(0.1)">
                            <span class="fa fa-search-plus"></span>
                        </span>
                    </button>
                    <button type="button" class="btn btn-primary" data-method="zoom" data-option="-0.1" title="Zoom Out">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.zoom(-0.1)">
                            <span class="fa fa-search-minus"></span>
                        </span>
                    </button>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn btn-primary" data-method="move" data-option="-10" data-second-option="0" title="Move Left">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.move(-10, 0)">
                            <span class="fa fa-arrow-left"></span>
                        </span>
                    </button>
                    <button type="button" class="btn btn-primary" data-method="move" data-option="10" data-second-option="0" title="Move Right">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.move(10, 0)">
                            <span class="fa fa-arrow-right"></span>
                        </span>
                    </button>
                    <button type="button" class="btn btn-primary" data-method="move" data-option="0" data-second-option="-10" title="Move Up">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.move(0, -10)">
                            <span class="fa fa-arrow-up"></span>
                        </span>
                    </button>
                    <button type="button" class="btn btn-primary" data-method="move" data-option="0" data-second-option="10" title="Move Down">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.move(0, 10)">
                            <span class="fa fa-arrow-down"></span>
                        </span>
                    </button>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-primary" data-method="crop" title="Crop">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.crop()">
                            <span class="fa fa-check"></span>
                        </span>
                    </button>
                    <button type="button" class="btn btn-primary" data-method="clear" title="Clear">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.clear()">
                            <span class="fa fa-times"></span>
                        </span>
                    </button>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-primary" data-method="reset" title="Reset">
                        <span class="docs-tooltip" data-toggle="tooltip" title="cropper.reset()">
                            <span class="fa fa-sync-alt"></span>
                        </span>
                    </button>

                </div>
            </div>







            @*<textarea class="form-control" id="putData" placeholder="Get data to here or set data with this value"></textarea>*@

        </div><!-- /.docs-buttons -->

        <div class="col-md-3 docs-toggles">
            <!-- <h3>Toggles:</h3> -->
            @*<a class="btn btn-success btn-block" data-toggle="tooltip" href="https://fengyuanchen.github.io/photo-editor" title="An advanced example of Cropper.js">Photo Editor</a>*@

        </div><!-- /.docs-toggles -->
    </div>
</div>
<script>
    function AjaxCall2(url, type, data, callback, callbackError) {
        var isfunction = callback && typeof (callback) == "function";
        if (!isfunction) {
            callback = function () {
                console.log("Chưa cài đặt sự kiện thành công");
            }
        }
        var isfunction = callbackError && typeof (callbackError) == "function";
        if (!isfunction) {
            callbackError = function () {
                NotiError("Thao tác không thể thực hiện");
            }
        }
        $.ajax({
            url: url,
            type: type,
            data: data,
            success: callback,
            error: callbackError
        })
    }

    function HoanThanh(id) {
        var Width = $("#dataWidth").val();
        var Height = $("#dataHeight").val();
        var DataX = $("#dataX").val();
        var DataY = $("#dataY").val();

        AjaxCall2('/QLTinBaiArea/QLTinBai/SaveCropImage', 'post', { id: id, width: Width, height: Height, x: DataX, y: DataY }, function (rs) {
            if (rs.Status) {
                //NotiSuccess("Đã duyệt thành công", rs.Message);
                //AfterSussessActionAjaxform();
                location.href='/QLTinBaiArea/QLTinBai/Detail/@Model.Id'
            } else {
                //NotiError("Lỗi xử lý", rs.Message);
                  console.log("b");
            }
        });
    }
</script>
<script src="~/Content/CropImage/js/jquery-3.2.1.min.js"></script>
<script src="~/Content/CropImage/js/bootstrap.bundle.min.js"></script>
<script src="~/Content/CropImage/js/cropper.js"></script>
<script src="~/Content/CropImage/js/main.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
@Scripts.Render("~/bundles/jqueryval")


